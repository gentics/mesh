<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="dns-prefetch" href="//oss.maxcdn.com" />
<link rel="dns-prefetch" href="//ajax.googleapis.com" />

<title>Authentication</title>
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Authentication" />
<meta name="twitter:description" content="" />
<meta name="twitter:image:src" content="https://getmesh.io/assets/gentics-card.png" />

<meta property="og:title" content="Authentication">
<meta property="og:url" content="https://getmesh.io/docs/authentication/">
<meta property="og:description" content="">
<meta property="og:image" content="https://getmesh.io/assets/gentics-card.png">
<link rel="icon" href="../../favicon.ico">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="shortcut icon" href="../../assets/g_logo_small.png" type="image/png" />
<link href="../../styles/docs.css" media="screen" rel="stylesheet">


<link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
    crossorigin="anonymous">
<script src="../../js/GCM.min.js"></script>
<script>
    window.GCM.init('/js/GCM-config.json', 'en', 1, true);
</script>

<link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">

</head>

<body class="body-navbar-">
    <nav class="navbar navbar-default navbar--top">
    <div class="container-fluid">
        
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
                aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../">
                <img class="logo" src="../../assets/gentics-mesh-logo.png" alt="Gentics Logo" />
            </a>
        </div>

        
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav"> 
                <li>
                    <a href="../../features">Features</a>
                </li>
                <li>
                    <a href="../../docs">Documentation</a>
                </li>
                <li>
                    <a href="../../demo">Demo</a>
                </li>
                <li>
                    <a href="../../services">Services</a>
                </li>
                <li>
                    <a href="../../training">Trainings</a>
                </li>
                <li>
                    <a href="../../premium-features">Premium Features</a>
                </li>
                
                <li>
                    <a class="btn btn-primary btn-download" href="../../download">Download</a>
                </li>
            </ul>
        </div>
        
    </div>
    
</nav>


    
<div class="topsection-wrapper">
    <div class="topsection container">
        <div class="row">
            <div class="col-md-12">
                <h1>Authentication</h1>
            </div>
        </div>
    </div>
</div>
 
  <div class="container docs-content">
    <div class="row">
      <div class="col-sm-12 col-md-push-9 col-md-3 hidden-xs hidden-sm">
        <div id="sidebar" data-spy="affix">
            
        </div>
      </div>
      <div class="col-sm-12 col-md-pull-3 col-md-9">
        <div class="toc hidden-md hidden-lg">
          <h2>Authentication</h2>
          
        </div>
        <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">Overview</a>
<ul class="sectlevel2">
<li><a href="#_authentication_configuration">Authentication Configuration</a></li>
</ul>
</li>
<li><a href="#_jwt">JWT</a>
<ul class="sectlevel2">
<li><a href="#_login">Login</a></li>
<li><a href="#_api_token">API Token</a></li>
<li><a href="#_anonymous_access">Anonymous Access</a></li>
<li><a href="#_forcing_user_to_change_password">Forcing user to change password</a></li>
</ul>
</li>
<li><a href="#_oauth2_oidc">OAuth2 / OIDC</a>
<ul class="sectlevel2">
<li><a href="#_limitations">Limitations</a></li>
<li><a href="#_configuration">Configuration</a></li>
<li><a href="#_mapping">Mapping</a></li>
<li><a href="#_authentication_service_plugin_api">Authentication Service Plugin API</a></li>
</ul>
</li>
<li><a href="#_oauth2_providers">OAuth2 Providers</a>
<ul class="sectlevel2">
<li><a href="#_keycloak">Keycloak</a></li>
<li><a href="#_auth0">Auth0</a></li>
<li><a href="#_okta">Okta</a></li>
<li><a href="#_other">Other</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Gentics Mesh provides multiple ways of authentication:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentication via login</p>
</li>
<li>
<p>Authentication via API token</p>
</li>
<li>
<p>Authentication via OAuth2</p>
</li>
<li>
<p>No authentication - Access via anonymous user</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently, all data including media assets such as images, videos, and documents are secured and need authentication to be retrieved.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Sending user credentials as base64 encoded string, or as plaintext is highly insecure to be used on an open network. This method MUST not be used in scenarios other than debugging and development when the connection between server and client is trusted.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_authentication_configuration">Authentication Configuration</h3>
<div class="paragraph">
<p>Gentics Mesh uses JWT (JSON Web Token) to handle authentication. It is thus required to create a cryptograph key to sign and verify the generated JWT&#8217;s.
Typically, if no keystore file has been provided, Gentics Mesh will create one on the basis of the configuration details in <code><code>mesh.yml</code></code> (see <a href="../../docs/administration-guide/#_conf">Configuration &amp; Settings</a>). If the <code><code>keystorePassword</code></code> property is omitted, a password will be generated randomly and stored in the configuration file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">security:
  tokenExpirationTime: 3600
  keystorePassword: "secret"
  keystorePath: "keystore.jceks"
  algorithm: "HS256"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use the <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/keytool.html">Java keytool</a> to create a new keystore.
Here is an example on how to create a keystore which contains a HMacSHA256 key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">keytool -genseckey -keystore keystore.jceks -storetype jceks -storepass secret -keyalg HMacSHA256 -keysize 2048 -alias HS256 -keypass secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>After creating the keystore, you need to set the keystore password, the path to the keystore file, and the used algorithm in the <code><code>mesh.yml</code></code> configuration file (see <a href="../../docs/administration-guide/#_conf">Configuration &amp; Settings</a>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jwt">JWT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to be able to store and retrieve content, a Gentics Mesh user needs to authenticate (<code>username:password</code>).</p>
</div>
<div class="paragraph">
<p>Each way will store a JWT in a cookie which is used to authenticate the user for succeeding requests.
The token only lasts a certain amount of time (which can be configured in the <code><code>mesh.yml</code></code> file, see setting <code><code>tokenExpirationTime</code></code> in the <a href="../../docs/administration-guide/#_conf">Configuration &amp; Settings</a> section), so it might be necessary to refresh the token.
The JWT will be automatically renewed with every request on the Gentics Mesh API.</p>
</div>
<div class="sect2">
<h3 id="_login">Login</h3>
<div class="paragraph">
<p>A user can be logged in via a basic authentication request to <code>GET /api/v2/auth/login</code>.</p>
</div>
<div class="sect3">
<h4 id="_basic_authentication_header">Basic Authentication Header</h4>
<div class="paragraph">
<p>In basic authentication, when a client requests a URL that requires authentication, the server requests the client to authenticate itself by sending a <code>401-Not Authorized</code> code. The client, in return, answers with login credentials sent in the <code><code>authorization</code></code> header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">authorization: Basic {base64_encode(username:password)}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Gentics Mesh, a user can be authenticated by invoking a regular <code><code>GET</code></code> request to the <code><code>/api/v2/auth/login</code></code> endpoint including a basic authentication HTTP header.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">curl -v -X GET   http://localhost:8080/api/v2/auth/login   -H 'authorization: Basic YWRtaW46YWRtaW4='</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response will be a valid JWT as well as set a cookie with the token.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">{
  "token" : "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyVXVpZCI6IjNjYjY2YzU0MmFlMzRiMDFiNjZjNTQyYWUzY2IwMWRiIiwiaWF0IjoxNDkxNzczMDYzLCJleHAiOjE0OTE3NzY2NjN9.8iG3I0Pe1M7J43pwbsBXiBOd6p0sn9dRxO3NfazVbOk="
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_post_json_data">POST JSON Data</h4>
<div class="paragraph">
<p>Alternatively, the user can <code><code>POST</code></code> his or her credentials to the <code><code>/api/v2/auth/login</code></code> endpoint in order to retrieve a token.
The JSON object must contain the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><code>username</code></code>: The username of the user</p>
</li>
<li>
<p><code><code>password</code></code>: The password of the user</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If authentication has been successful, the server will respond with a JSON object containing a single property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><code>token</code></code>: The token to be sent on every subsequent request.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, the token will also be provided in a cookie.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">curl -v -X POST \
  http://localhost:8080/api/v2/auth/login \
  -H 'content-type: application/json' \
  -d '{
  "username" : "admin",
  "password" : "admin"
}'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">*   Trying ::1...
* TCP_NODELAY set
* Connected to localhost (::1) port 8080 (#0)
&gt; POST /api/v2/auth/login HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.50.3
&gt; Accept: */*
&gt; content-type: application/json
&gt; Content-Length: 50
&gt;
* upload completely sent off: 50 out of 50 bytes
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json; charset=utf-8
&lt; Cache-Control: no-cache
&lt; Content-Length: 208
&lt; Set-Cookie: mesh.token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyVXVpZCI6IjNjYjY2YzU0MmFlMzRiMDFiNjZjNTQyYWUzY2IwMWRiIiwiaWF0IjoxNDkxNzczODU0LCJleHAiOjE0OTE3Nzc0NTR9._qt3Eufi7-3jnvgQ8lfe_KwJbd5ePwx5jOFrCK9w76A=; Max-Age=3600; Expires=Sun, 9 Apr 2017 22:37:34 GMT; Path=/
&lt;
{
  "token" : "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyVXVpZCI6IjNjYjY2YzU0MmFlMzRiMDFiNjZjNTQyYWUzY2IwMWRiIiwiaWF0IjoxNDkxNzczODU0LCJleHAiOjE0OTE3Nzc0NTR9._qt3Eufi7-3jnvgQ8lfe_KwJbd5ePwx5jOFrCK9w76A="
* Curl_http_done: called premature == 0
* Connection #0 to host localhost left intact
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both login methods will yield a JSON web token.</p>
</div>
<div class="paragraph">
<p>For further requests, the JWT can be provided in two ways. By default it is passed along with a cookie value. E.g., this is useful for embedding binary image nodes directly in HTML, since the browser will automatically handle authentication on the basis of the cookie.
Alternatively, the token can be passed along within the <code><code>Authorization</code></code> header which includes the regular JWT <code><code>Bearer &lt;Token&gt;</code></code>, where <code><code>&lt;Token&gt;</code></code> is the token you received from the login/cookie.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">curl -X GET \
  http://localhost:8080/api/v2/demo/nodes \
  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyVXVpZCI6IjNjYjY2YzU0MmFlMzRiMDFiNjZjNTQyYWUzY2IwMWRiIiwiaWF0IjoxNDkxNzY1NDEzLCJleHAiOjE0OTE3NjkwMTN9.UY8OgjiK5qyZobAWt6X1Vd1Z-zg68BeJgGZKbW4Ucj0=' \</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api_token">API Token</h3>
<div class="paragraph">
<p>An API token will never expire. This is different from regular tokens which will be issued when calling <code>/api/v2/auth/login</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Leaking an API token is potentially dangerous and thus the API token should only be used in combination with a secure connection.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Typical use cases for API tokens are backend implementations which constantly communicate with Gentics Mesh using a secure or local connection.</p>
</div>
<div class="paragraph">
<p>The token can be issued per user with <code><code>POST /api/v2/users/:userUuid/token</code></code>. Note that update permissions is required on the user associated with the provided userUuid.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Creating a new API token will automatically invalidate a previously issued token.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since the token is just a regular JWT you just need to add it to your request <code>Authorization</code> header field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">curl -X GET \
  http://localhost:8080/api/v2/demo/nodes \
  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyVXVpZCI6IjNjYjY2YzU0MmFlMzRiMDFiNjZjNTQyYWUzY2IwMWRiIiwiaWF0IjoxNDkxNzY1NDEzLCJleHAiOjE0OTE3NjkwMTN9.UY8OgjiK5qyZobAWt6X1Vd1Z-zg68BeJgGZKbW4Ucj0=' \</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to manually revoke a previously issued token via <code><code>DELETE /api/v2/users/:userUuid/token</code></code>. Once the token is invalidated it can no longer be used for authentication. This requires delete permission on the user associated with the provided userUuid.</p>
</div>
</div>
<div class="sect2">
<h3 id="_anonymous_access">Anonymous Access</h3>
<div class="paragraph">
<p>Gentics Mesh first and foremost keeps your content safe - all data including media assets such as images, videos, and documents are secured and need authentication to be retrieved. However, sometimes it may be desirable to serve public content with Gentics Mesh.</p>
</div>
<div class="paragraph">
<p>That is why Gentics Mesh instances ship with an included <code><code>anonymous</code></code> user/role/group set.
If no authentication details are provided Gentics Mesh will automatically try to authenticate with the user <code><code>anonymous</code></code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Try our Gentics Mesh demo instance without authenticating yourself: <code><code><a href="https://demo.getmesh.io/api/v2/auth/me" class="bare">https://demo.getmesh.io/api/v2/auth/me</a></code></code>. This <a href="../../docs/api#auth">API endpoint</a> shows the currently authenticated user - which is <code><code>anonymous</code></code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can assign <code><code>readPublished</code></code> permissions to the <code><code>anonymous</code></code> role for all elements you want to be publicly available.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Assigning further permissions would of course allow for other operations to be granted.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Anonymous access can be configured in the <code><code>mesh.yml</code></code> configuration file (see <a href="../../docs/administration-guide/#_conf">Configuration &amp; Settings</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-yaml" data-lang="yaml">security:
   enableAnonymousAccess: true</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Recreating a previously deleted <code><code>anonymous</code></code> user would automatically re-enable the feature if the configuration setting <code><code>enableAnonymousAccess</code></code> is set to <code><code>true</code></code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_forcing_user_to_change_password">Forcing user to change password</h3>
<div class="paragraph">
<p>Since Gentics Mesh <code>0.31.5</code> it is possible to force a user to change their password on their next login.
This is useful in situations when you want to create a user for someone else but want the user to set their password for themselves.</p>
</div>
<div class="paragraph">
<p>To do so, <a href="../../docs/api#users<em>post">create</a> or <a href="../../docs/api#users</em>userUuid__post">update</a> a user and make sure to set the <code>forcedPasswordChange</code> flag to <code>true</code>.
Now, when the user tries to login in regularly they will receive an error message with status code <code>400</code> telling them to provide a new password in the login request.
The user has to additionally set the <code>newPassword</code> property when sending the <a href="../../docs/api#auth_login_post">login request</a>. Then the password is changed and the user is logged in.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oauth2_oidc">OAuth2 / OIDC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Gentics Mesh supports OAuth2 / OIDC. Authorized users can pass their JWT to the API. Gentics Mesh will act as a <strong>resource server</strong> and process the provided access token. The token will be validated and the user request processed.</p>
</div>
<div class="imageblock img-responsive">
<div class="content">
<img src="../images/oauth2-flow.svg" alt="OAuth 2.0 Flow" width="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Gentics Mesh will just utilize provided access tokens. The needed OAuth2 sign-in and token refresh handling <strong>must</strong> be done by the client.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The provided OAuth2 user information will automatically be kept in-sync with the user that is present in Gentics Mesh.
The synchronization process will also take care of creating new users and even roles and groups.</p>
</div>
<div class="sect2">
<h3 id="_limitations">Limitations</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The Gentics Mesh UI is currently not Keycloak aware. The UI will thus not redirect you to the Keycloak login page. This functionality will be part of a future release of the Gentics Mesh UI.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_configuration">Configuration</h3>
<div class="paragraph">
<p>The list of public keys which will be used to validate and accept JWT&#8217;s can be added to the <code>config/public-keys.json</code> file. The path to this file can be configured via the <code>security.publicKeysPath</code> setting in the <code>mesh.yml</code> file or via the <code>MESH_AUTH_PUBLIC_KEYS_PATH</code> environment variable.</p>
</div>
<div class="listingblock">
<div class="title">public-keys.json</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-json" data-lang="json">{
    "keys": [
        {
            "alg": "RS256",
            "kty": "RSA",
            "use": "sig",
            "x5c": [
                "MIIC/TCCAeWgAwIBAgIJA3kWNismjx1FMA0GCSqGSIb3DQEBCwUAMBwxGjAYBgNVBAMTEWpvdHNjaGkuYXV0aDAuY29tMB4XDTE5MDgyMDE4MTA0OVoXDTMzMDQyODE4MTA0OVowHDEaMBgGA1UEAxMRam90c2NoaS5hdXRoMC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKs/QbFvLs43ZRT4LzbrMVWgHfmJ/gOtkVZxCdznHXFa9b8B4JNKLHvAZiK9L5JXA2D0jDYDHTbEYQiisZb52zpqWFRaHD8vt9fxDbqIFZDljseEJT9/FXlKFBjl2XwVLqnmBBhRo5k0iu5PPSYY6zfzSmg5IY4Tw9FA81zO3ZeJPxazyIsFhldcCauCiK87N+ifocjL139NwJCtrWBoExnAVsMD4wrp++N36iplsZTSlzBd9Fqo4OZtHThJk2CHMv506l/dlHfl1KSK+8By97DXBmPk4DWSCqEThfDD+So3DFBhn/B5pofN3zL0YaCiD6oBB+Y+wFc3nInv+cjTFnAgMBAAGjQjBAMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFCZuptNeNaVwG8cEYHv2ApQyqFEeMA4GA1UdDwEB/wQEAwIChDANBgkqhkiG9w0BAQsFAAOCAQEAPoh8yvw8nPKzhFWR2JnEmuLU8vK1azn822dIY4ZulHpoS8ATQod8Z+jB8ejszezOr3/JeMYRsvrwisQgbXJQTahwg6Xudx4NDJvEFZowOJ4nvRLRp0ZZGVFeKZFI/dxdcNntk+nCkcLCiO78Wq2mdjSnMp83ueO2X/YtRczjNsbUXGyeUoXkZMRydaqkAJDuSrGDLr12iOKw4hk/162AiUs4n6v2Wbfdh7PtE+PPutHWBSvKCMkSCh8exQ9h0MllgsBj6YzdOnhicv0g5BjM3qlp+1PlwNQmunVy5qcPu1ZNqbmrMnf7d6KjKw1iW0v3TnHaC09if4qFnj82J46m/g=="
            ],
            "n": "yrP0Gxby7ON2UU-C826zFVoB35if4DrZFWcQnc5x1xWvW_AeCTSix7wGYivS-SVwNg9Iw2Ax02xGEIorGW-ds6alhUWhw_L7fX8Q26iBWQ5Y7HhCU_fxV5ShQY5dl8FS6p5gQYUaOZNIruTz0mGOs380poOSGOE8PRQPNczt2XiT8Ws8iLBYZXXAmrgoivOzfon6HIy9d_TcCQra1gaBMZwFbDA-MK6fvjd-oqZbGU0pcwXfRaqODmbR04SZNghzL-dOpf3ZR35dSkivvAcvew1wZj5OA1kgqhE4Xww_kqNwxQYZ_weaaHzd8y9GGgog-qAQfmPsBXN5yJ7_nI0xZw",
            "e": "AQAB",
            "kid": "MDFCQ0E3RDM4QzIyNkIwNTNEQUQ4QzcxMDQ4NjM5NkFCOUMxNzY3Nw",
            "x5t": "MDFCQ0E3RDM4QzIyNkIwNTNEQUQ4QzcxMDQ4NjM5NkFCOUMxNzY3Nw"
        }
    ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapping">Mapping</h3>
<div class="paragraph">
<p>The access token properties will be used to synchronize the user data with Gentics Mesh.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default the authenticated user will automatically be created within Gentics Mesh.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Currently the following fields will be kept in sync with Gentics Mesh:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Mapped Fields</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Token Field</th>
<th class="tableblock halign-left valign-top">Gentics Mesh</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">given_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User firstname</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">family_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User lastname</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">preferred_username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User username</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>preferred_username</code> field is the main id property which will be used to locate a user.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the username changes a new user will be created in Gentics Mesh.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Authentication plugins can override this field via the <code>extractUsername()</code> methods.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_authentication_service_plugin_api">Authentication Service Plugin API</h3>
<div class="paragraph">
<p>By default groups and roles will not be handled by the synchronization process. It is however possible to provide a custom authentication plugin which can extract role and group information from the access token information.
This way groups and roles can be directly created.</p>
</div>
<div class="paragraph">
<p>It is also possible to write or use plugins which provide JWK&#8217;s to Gentics Mesh.
The <code>AuthServicePlugin</code> API provides methods which can be used to supply JWKs to Gentics Mesh.</p>
</div>
<div class="paragraph">
<p>You can read more on this topic in the <a href="../../docs/plugin-types/auth-service-plugin/">Authentication Service Plugin API</a> section.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oauth2_providers">OAuth2 Providers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_keycloak">Keycloak</h3>
<div class="paragraph">
<p>The public keys can be loaded from keycloak via the certs endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">https://localhost:8443/auth/realms/realmName/protocol/openid-connect/certs</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_auth0">Auth0</h3>
<div class="ulist">
<ul>
<li>
<p>Applications &#8594; Settings &#8594; Show Advanced Settings &#8594; Endpoints &#8594; JSON Web Key Set</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">https://yourName.auth0.com/.well-known/jwks.json</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_okta">Okta</h3>
<div class="paragraph">
<p>The keys can be downloaded via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>https://yourName.okta.com/oauth2/v1/keys</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other">Other</h3>
<div class="paragraph">
<p>For other providers it is required to find the matching JWK and add it to the list of accepted public keys. Public keys which are provided in PEM format can be converted to the JWK format using third party tools.</p>
</div>
</div>
</div>
</div>

        



        
      </div>
    </div>
  </div>


    <div class="footer">
    <a name="footer"></a>
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h2>Keep in touch</h2>
                <p>Find us on Twitter
                    <a href="https://twitter.com/genticsmesh" target="_blank" rel="noopener noreferrer">@genticsmesh</a>
                </p>
                <p>Get help on
                    <a href="https://stackoverflow.com/questions/tagged/gentics-mesh" target="_blank" rel="noopener noreferrer">stackoverflow</a>
                </p>
                <p>Ask us anything on
                    <a href="https://gitter.im/gentics/mesh" target="_blank" rel="noopener noreferrer">Gitter</a>
                </p>
                <p>Dive into the code at
                    <a href="https://github.com/gentics/mesh" target="_blank" rel="noopener noreferrer">GitHub</a>
                </p>
            </div>
            <div class="col-md-6">
                <h2>Legal</h2>
                <p>Licensed under
                    <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer">Apache License v2.0</a> |
                    <a href="../../imprint">Imprint</a>
                </p>
            </div>
        </div>
        <div class="row ending center">
            <p class="padding-top-25">Made in
                <a href="https://www.mercer.com/newsroom/2018-quality-of-living-survey.html" target="_blank" rel="noopener noreferrer">Vienna - the most livable city in the world</a> 
                <img src="../../assets/noun_Wine_1032235.svg" height="24">
            </p>
        </div>
    </div>

       

        <div class="apa-consent-reset apa-consent-wrapper">


            <div class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-banner testOFF">

                <ul class="apa-consent-reset apa-consent-bannerContent">
                    <li class="apa-consent-reset">
                        <div class="apa-consent-reset apa-consent-bannerText">
                        </div>
                    </li>
                    <li class="apa-consent-reset apa-consent-buttonWrapperDetails">
                        <button class="apa-consent-reset apa-consent-button">
                            cookie-preferences
                        </button>
                    </li>
                    <li class="apa-consent-reset apa-consent-buttonWrapperAccept">
                        <button id="apa-consent-button-accept" class="apa-consent-reset apa-consent-button">
                            accept
                        </button>
                    </li>
                </ul>

                <div class="apa-consent-reset apa-consent-bgColorWhite apa-consent-boxShadow apa-consent-bannerButtonOFF">
                    <div class="apa-consent-reset apa-consent-bannerButtonOFFicon1 apa-consent-bgColor"></div>
                    <div class="apa-consent-reset apa-consent-bannerButtonOFFicon2 apa-consent-bgColor"></div>
                </div>

            </div>

            <div class="apa-consent-reset apa-consent-dialogWrapper testOFF">
                <div class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-dialog">
                    <div class="apa-consent-reset apa-consent-mobileScroller">

                        <div class="apa-consent-reset apa-consent-mobileClose"></div>

                        <div class="apa-consent-reset apa-consent-dialogInnerWidth apa-consent-dialogHeader">
                            <h3 class="apa-consent-reset apa-consent-H3">
                                Cookie Preferences
                            </h3>
                            <p class="apa-consent-reset apa-consent-P">
                                Choose if this website is only allowed to use functional cookies and/or marketing cookies.
                            </p>
                        </div>
                        <div class="apa-consent-reset apa-consent-dialogBodyWrapper">
                            <div class="apa-consent-reset apa-consent-dialogInnerWidth apa-consent-dialogBody">
                                <ul class="apa-consent-reset apa-consent-items">

                                </ul>
                            </div>
                        </div>
                        <div class="apa-consent-reset apa-consent-dialogInnerWidth apa-consent-dialogSubmit">
                            <button id="apa-constent-button-save-settings" class="apa-consent-reset apa-consent-button apa-consent-boxShadow">
                                save & close
                            </button>
                        </div>

                        <div class="apa-consent-reset apa-consent-bgColorWhite apa-consent-boxShadow apa-consent-dialogButtonOFF">
                            <div class="apa-consent-reset apa-consent-dialogButtonOFFicon1"></div>
                            <div class="apa-consent-reset apa-consent-dialogButtonOFFicon2 apa-consent-bgColor"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>


   <div  id="bannerButtonOpen" class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-bannerButtonON">
            <div class="apa-consent-reset apa-consent-bannerButtonONicon1 apa-consent-bgColorWhite"></div>
            <div class="apa-consent-reset apa-consent-bannerButtonONicon2 apa-consent-bgColorWhite"></div>
        </div>

        <div class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-dialogButtonON testOFF">
            <div class="apa-consent-reset apa-consent-dialogButtonONicon1 apa-consent-bgColorWhite"></div>
            <div class="apa-consent-reset apa-consent-dialogButtonONicon2 apa-consent-bgColorWhite"></div>
        </div>


     

        

            

    <ul style="display:none">
        <li id="prototypeAppEntry" class="apa-consent-reset apa-consent-item">
            <div class="apa-consent-reset apa-consent-itemSwitch">
                <span class="apa-consent-reset apa-consent-boxShadow"></span>
            </div>
            <div class="apa-consent-reset apa-consent-itemTitle">

            </div>
            <div class="apa-consent-reset apa-consent-itemText">

            </div>
            <div class="apa-consent-reset apa-consent-itemSubItems">
                <ul class="apa-consent-reset apa-consent-cookie-items">
                    <li id="prototypeAppEntryCookieItem" style="display:none" class="apa-consent-reset apa-consent-itemSubItem">
                        <div class="apa-consent-reset apa-consent-subItemTitle">
                            <div class="apa-consent-reset apa-consent-subItemSwitch"></div>
                            <span></span>
                        </div>
                        <div class="apa-consent-reset apa-consent-subItemText">
                            <p class="apa-consent-reset apa-consent-P"></p>
                        </div>
                    </li>
                </ul>
            </div>
        </li>

        <li id="prototypeAppEntryProtected" class="apa-consent-reset apa-consent-item">
            <div class="apa-consent-reset apa-consent-itemSwitch">
                <span class=" apa-consent-reset apa-consent-boxShadow"></span>
            </div>
            <div class="apa-consent-reset apa-consent-itemTitle apa-consent-itemTitleSwitch">
            </div>
            <div class="apa-consent-reset apa-consent-itemText">

            </div>
            <div class="apa-consent-reset apa-consent-itemSubItems">
                <ul class="apa-consent-reset apa-consent-cookie-items">

                    <li id="prototypeAppEntryProtectedCookieItem" style="display: none;" class="apa-consent-reset apa-consent-itemSubItem">
                        <div class="apa-consent-reset apa-consent-subItemTitle">
                            <div class="apa-consent-reset apa-consent-subItemSwitch"></div>
                            <span></span>
                        </div>
                        <div class="apa-consent-reset apa-consent-subItemText">
                            <p class="apa-consent-reset apa-consent-P"></p>
                        </div>
                    </li>
                </ul>
            </div>
        </li>

    </ul>


</div>

    
    <script
  src="https://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>

<script src="../../js/bootstrap.min.js"></script>

<script
  src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"
  crossorigin="anonymous"></script>

<script src="../../js/site.js"></script>

<script 
  src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"
  integrity="sha256-sHRX2PXOLRG+LQtTpvREFsWhMVu2AJnmzxpmogmddtM="
  crossorigin="anonymous"></script>

<script>hljs.initHighlightingOnLoad();</script>

<script src="../../js/docs.js"></script>
<script src="../../js/sidebar.js"></script>
<script src="../../js/GCM-banner.js"></script>
<script>
  var hasExample = jQuery(".graphql-example").length > 0;
  hasExample && document.write('<link rel="stylesheet" href="../../graphiql/graphiql.css" /><script src="../../graphiql/vendor/fetch.min.js">\x3C/script><script src="../../graphiql/vendor/react-16.8.6.min.js">\x3C/script><script src="../../graphiql/vendor/react-dom-16.8.6.min.js">\x3C/script><script src="../../graphiql/graphiql.js">\x3C/script><script src="../../graphiql/embedded.js">\x3C/script>');
</script>


       

        <div class="apa-consent-reset apa-consent-wrapper">


            <div class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-banner testOFF">

                <ul class="apa-consent-reset apa-consent-bannerContent">
                    <li class="apa-consent-reset">
                        <div class="apa-consent-reset apa-consent-bannerText">
                        </div>
                    </li>
                    <li class="apa-consent-reset apa-consent-buttonWrapperDetails">
                        <button class="apa-consent-reset apa-consent-button">
                            cookie-preferences
                        </button>
                    </li>
                    <li class="apa-consent-reset apa-consent-buttonWrapperAccept">
                        <button id="apa-consent-button-accept" class="apa-consent-reset apa-consent-button">
                            accept
                        </button>
                    </li>
                </ul>

                <div class="apa-consent-reset apa-consent-bgColorWhite apa-consent-boxShadow apa-consent-bannerButtonOFF">
                    <div class="apa-consent-reset apa-consent-bannerButtonOFFicon1 apa-consent-bgColor"></div>
                    <div class="apa-consent-reset apa-consent-bannerButtonOFFicon2 apa-consent-bgColor"></div>
                </div>

            </div>

            <div class="apa-consent-reset apa-consent-dialogWrapper testOFF">
                <div class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-dialog">
                    <div class="apa-consent-reset apa-consent-mobileScroller">

                        <div class="apa-consent-reset apa-consent-mobileClose"></div>

                        <div class="apa-consent-reset apa-consent-dialogInnerWidth apa-consent-dialogHeader">
                            <h3 class="apa-consent-reset apa-consent-H3">
                                Cookie Preferences
                            </h3>
                            <p class="apa-consent-reset apa-consent-P">
                                Choose if this website is only allowed to use functional cookies and/or marketing cookies.
                            </p>
                        </div>
                        <div class="apa-consent-reset apa-consent-dialogBodyWrapper">
                            <div class="apa-consent-reset apa-consent-dialogInnerWidth apa-consent-dialogBody">
                                <ul class="apa-consent-reset apa-consent-items">

                                </ul>
                            </div>
                        </div>
                        <div class="apa-consent-reset apa-consent-dialogInnerWidth apa-consent-dialogSubmit">
                            <button id="apa-constent-button-save-settings" class="apa-consent-reset apa-consent-button apa-consent-boxShadow">
                                save & close
                            </button>
                        </div>

                        <div class="apa-consent-reset apa-consent-bgColorWhite apa-consent-boxShadow apa-consent-dialogButtonOFF">
                            <div class="apa-consent-reset apa-consent-dialogButtonOFFicon1"></div>
                            <div class="apa-consent-reset apa-consent-dialogButtonOFFicon2 apa-consent-bgColor"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>


   <div  id="bannerButtonOpen" class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-bannerButtonON">
            <div class="apa-consent-reset apa-consent-bannerButtonONicon1 apa-consent-bgColorWhite"></div>
            <div class="apa-consent-reset apa-consent-bannerButtonONicon2 apa-consent-bgColorWhite"></div>
        </div>

        <div class="apa-consent-reset apa-consent-bgColor apa-consent-boxShadow apa-consent-dialogButtonON testOFF">
            <div class="apa-consent-reset apa-consent-dialogButtonONicon1 apa-consent-bgColorWhite"></div>
            <div class="apa-consent-reset apa-consent-dialogButtonONicon2 apa-consent-bgColorWhite"></div>
        </div>


     

        

            

    <ul style="display:none">
        <li id="prototypeAppEntry" class="apa-consent-reset apa-consent-item">
            <div class="apa-consent-reset apa-consent-itemSwitch">
                <span class="apa-consent-reset apa-consent-boxShadow"></span>
            </div>
            <div class="apa-consent-reset apa-consent-itemTitle">

            </div>
            <div class="apa-consent-reset apa-consent-itemText">

            </div>
            <div class="apa-consent-reset apa-consent-itemSubItems">
                <ul class="apa-consent-reset apa-consent-cookie-items">
                    <li id="prototypeAppEntryCookieItem" style="display:none" class="apa-consent-reset apa-consent-itemSubItem">
                        <div class="apa-consent-reset apa-consent-subItemTitle">
                            <div class="apa-consent-reset apa-consent-subItemSwitch"></div>
                            <span></span>
                        </div>
                        <div class="apa-consent-reset apa-consent-subItemText">
                            <p class="apa-consent-reset apa-consent-P"></p>
                        </div>
                    </li>
                </ul>
            </div>
        </li>

        <li id="prototypeAppEntryProtected" class="apa-consent-reset apa-consent-item">
            <div class="apa-consent-reset apa-consent-itemSwitch">
                <span class=" apa-consent-reset apa-consent-boxShadow"></span>
            </div>
            <div class="apa-consent-reset apa-consent-itemTitle apa-consent-itemTitleSwitch">
            </div>
            <div class="apa-consent-reset apa-consent-itemText">

            </div>
            <div class="apa-consent-reset apa-consent-itemSubItems">
                <ul class="apa-consent-reset apa-consent-cookie-items">

                    <li id="prototypeAppEntryProtectedCookieItem" style="display: none;" class="apa-consent-reset apa-consent-itemSubItem">
                        <div class="apa-consent-reset apa-consent-subItemTitle">
                            <div class="apa-consent-reset apa-consent-subItemSwitch"></div>
                            <span></span>
                        </div>
                        <div class="apa-consent-reset apa-consent-subItemText">
                            <p class="apa-consent-reset apa-consent-P"></p>
                        </div>
                    </li>
                </ul>
            </div>
        </li>

    </ul>



    <script>
    window.GCM.apps.whenAllowed('google', function () {
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-69994739-1', 'auto');
        ga('send', 'pageview');
    });
</script>
    
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "Gentics Mesh",
        "url": "https://getmesh.io",
        "logo": "https://getmesh.io/assets/gentics-mesh-logo.png",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Laimgrubengasse 10",
            "addressRegion": "Vienna",
            "postalCode": "1060",
            "addressCountry": "Austria"
        },
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer support",
            "telephone": "+43-1-7109904-300",
            "email": "support@gentics.com"
        },
        "sameAs": [
            "https://twitter.com/genticsmesh",
            "https://github.com/gentics/mesh",
            "https://stackoverflow.com/questions/tagged/genticsmesh"
        ]
    }
</script>
</body>

</html>
